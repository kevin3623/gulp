function closeEval(){history.go(-1)}function toggleName(){var t=["./images/circle_noCheck.png","./images/cirlce_check.png"];$(".right").toggle(function(){$(this).attr("data-checked","0"),$("#submit").text("匿名提交"),$(".right img").attr("src",t[1])},function(){$(this).attr("data-checked","1"),$("#submit").text("提交"),$(".right img").attr("src",t[0])})}function evalStar(){var i=["./images/star_noChecked.png","./images/start_checked.png"],s=["非常不满意","不满意","满意","比较满意","非常满意"],r={dissatisfaction:["信息不准确","页面打开慢","办理效率低","流程较复杂"],satisfaction:["信息较准确","页面较流畅","办理较高效","流程较简洁"],quiteSatisfied:["信息准确","页面流畅","办理高效","安全可靠"]};$(".starEval img").on("click",function(t){var a=Number($(this).attr("data-num"));console.log(a),$(".textEval").text(s[a]),$(".textEval").addClass("startChecked"),$(".starEval").attr("data-star",a+1),$(".starEval img").attr("src",i[0]);for(var e=0;e<=a;e++)$($(".starEval img")[e]).attr("src",i[1]);a<2?r.dissatisfaction.forEach(function(t,a){$($(".evalDescribe span")[a]).text(t)}):(2===a?r.satisfaction.forEach(function(t,a){$($(".evalDescribe span")[a]).text(t)}):r.quiteSatisfied.forEach(function(t,a){$($(".evalDescribe span")[a]).text(t)}),$("#textarea").attr("placeholder","请输入您的意见或建议"))})}function evalDescribe(){for(var t=0;t<4;t++)$($(".evalDescribe span")[t]).toggle(function(){$(this).addClass("checked")},function(){$(this).removeClass("checked")})}function submit(){for(var t=$(".right").attr("data-checked"),a=$(".starEval").attr("data-star"),e=[],i=$("#textarea").val(),s=0;s<$(".evalDescribe .checked").length;s++)e.push($($(".evalDescribe .checked")[s]).text());var r={caseId:getQueryVariable("caseId"),content:i,starLevel:a,editableTag:JSON.stringify(e),anonymous:t};$.ajax({type:"POST",url:"/h5gateway/evaluate/addEvaluate",data:JSON.stringify(r),xhrFields:{withCredentials:!0},dataType:"json",contentType:"application/json;charset=UTF-8",success:function(t){$.myToast(t.value)},error:function(t){$.myToast("出错了")}})}function getQueryVariable(t){for(var a=window.location.search.substring(1).split("&"),e=0;e<a.length;e++){var i=a[e].split("=");if(i[0]==t)return i[1]}return!1}$(function(){$(".close").on("click",closeEval),toggleName(),evalStar(),evalDescribe(),$("#submit").on("click",submit)});